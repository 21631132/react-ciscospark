# Spark Base Widget _(@ciscospark/spark-widget-base)_

> This base React component does the initial React, Spark authentication, and Redux setup for all Spark widgets.

## Usage

There are a number of ways to use our `spark-widget-base` repo to begin developing your own widget on the Cisco Spark platform.

> **IMPORTANT NOTE**: In order to authenticate to Spark, the resulting components require an `accessToken` prop that you must provide when instantiating your widget. Please see the [Authentication Section](#authentication)

### Quick Start

To automatically setup Cisco Spark connections, and register your widget into the global browser store, you can use the `sparkWidgetBase` enhancer like so:

``` js
import sparkWidgetBase from '@ciscospark/spark-widget-base';

function MyWidget(props) {
  return <div>My Widget</div>;
}


export default sparkWidgetBase('myWidget', MyWidget);
```

### Widgets using Redux

If you are also using `redux` for state management and want to provide your own reducers, import and use the `constructSparkEnhancer` higher order component instead:

``` js
import React, {Component} from 'react';
import {constructSparkEnhancer} from '@ciscospark/spark-widget-base';

import reducers from './reducer';

class MyWidget extends Component {
  render() {
    return <div>My Widget's name is {this.props.displayName}</div>
  }
}

export default constructSparkEnhancer({
  name: 'myWidget',
  reducers
})(MyWidget);
```

By constructing your component like this, the constructor will combine your reducers with internal spark reducers and update your store with a `react-redux` `<Provider />`. This will allow you to `connect()` any child components and gain access to the store.

### Authentication

In order to authenticate to Spark, you must provide the resulting React Components with an `accessToken` prop.
This can be done programatically like so:

``` js
import MyWidget from './MyWidget';

class MyApp extends Component {
  render() {
    return <MyWidget accessToken={this.getState().accessToken} />;
  }
}

```

## Advance Usage

When your widget instantiates, it will get receive props from our main store. Some of the data and functions you will have access to:

- `sparkState`: an object that will provide you with device registration and authentication states
- `sparkInstance`: the `spark` object that is provided by the [Spark JS SDK](https://github.com/ciscospark/spark-js-sdk/). You can use this object to interact with Spark APIs as the authenticated user.
