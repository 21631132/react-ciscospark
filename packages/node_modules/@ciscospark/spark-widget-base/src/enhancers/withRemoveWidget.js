import {
  compose,
  lifecycle
} from 'recompose';
import {bindActionCreators} from 'redux';
import {connect} from 'react-redux';


export const REMOVE_WIDGET = 'widget-base/REMOVE_WIDGET';
export function removeWidget() {
  return {
    type: REMOVE_WIDGET
  };
}

export default function withRemoveWidget() {
  return (BaseComponent) => compose(
    connect(
      (state) => state,
      (dispatch) => bindActionCreators({
        removeWidget
      }, dispatch)
    ),
    lifecycle({
      componentWillUnmount() {
        this.props.removeWidget();
      }
    })
  )(BaseComponent);
}
