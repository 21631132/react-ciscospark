import {combineReducers} from 'redux';
import sparkReducer from '@ciscospark/react-redux-spark';

import {REMOVE_WIDGET} from './actions';

export default function createRootReducer(reducers = {}) {
  const rootReducers = reducers;
  rootReducers.spark = sparkReducer;
  const widgetReducer = combineReducers(rootReducers);
  return (state, action) => {
    let newState = Object.assign({}, state);
    if (action.type === REMOVE_WIDGET) {
      newState = undefined;
    }
    if (widgetReducer) {
      return widgetReducer(state, action);
    }
    return newState;
  };
}
