import {initialState, reducer} from './reducer';
import {
  UPDATE_PARTICIPANT_SETTINGS,
  UPDATE_WIDGET_STATE
} from './actions';

describe(`widget-roster reducer tests`, () => {

  it(`should return initial state`, () => {
    expect(reducer(undefined, {}))
      .toMatchSnapshot();
  });

  it(`should handle UPDATE_PARTICIPANT_SETTINGS`, () => {
    expect(reducer(initialState, {
      type: UPDATE_PARTICIPANT_SETTINGS,
      payload: {
        participantId: `abc-123`,
        settings: {
          testing: true,
          isRealLife: false
        }
      }
    })).toMatchSnapshot();
  });

  it(`should change a participant's settings`, () => {
    const participantId = `abc-123`;
    const participantState = initialState.mergeIn([`participantSettings`, participantId], {testing: false});
    expect(reducer(participantState, {
      type: UPDATE_PARTICIPANT_SETTINGS,
      payload: {
        participantId: `abc-123`,
        settings: {
          testing: true,
          isRealLife: false
        }
      }
    })).toMatchSnapshot();
  });

  it(`should handle UPDATE_WIDGET_STATE`, () => {
    expect(reducer(initialState, {
      type: UPDATE_WIDGET_STATE,
      payload: {
        state: {
          searchTerm: `Carmen Sandiago`
        }
      }
    })).toMatchSnapshot();
  });
});
