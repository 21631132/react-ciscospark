import {initialState, reducer} from './reducer';
import {
  SET_PARTICIPANT_EDITING,
  UPDATE_WIDGET_STATE
} from './actions';

describe(`widget-roster reducer tests`, () => {

  it(`should return initial state`, () => {
    expect(reducer(undefined, {}))
      .toMatchSnapshot();
  });

  it(`should handle SET_PARTICIPANT_EDITING`, () => {
    expect(reducer(initialState, {
      type: SET_PARTICIPANT_EDITING,
      payload: {
        participant: {
          id: `abc-123`
        }
      }
    })).toMatchSnapshot();
  });

  it(`should change a participant's settings`, () => {
    const participant = {id: `abc-123`};
    const participantState = initialState.set(`editingParticipant`, participant);
    expect(reducer(participantState, {
      type: SET_PARTICIPANT_EDITING,
      payload: {
        participant: false
      }
    })).toMatchSnapshot();
  });

  it(`should handle UPDATE_WIDGET_STATE`, () => {
    expect(reducer(initialState, {
      type: UPDATE_WIDGET_STATE,
      payload: {
        state: {
          searchTerm: `Carmen Sandiago`
        }
      }
    })).toMatchSnapshot();
  });
});
