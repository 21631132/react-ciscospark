import React, {PropTypes} from 'react';
import {intlShape} from 'react-intl';
import classNames from 'classnames';

import CallControls from '../call-controls';
import Video from '@ciscospark/react-component-video';
import styles from './styles.css';

export default function ActiveCall({
  intl,
  onHangupClick,
  localMediaStreamUrl,
  remoteMediaStreamUrl
}) {
  const connectedClass = remoteMediaStreamUrl ? styles.callConnected : ``;
  return (
    <div className={classNames(styles.callContainer, connectedClass, `call-container`)}>
      <div className={classNames(styles.remoteVideo, `remote-video`)}>
        {
          remoteMediaStreamUrl &&
          <Video src={remoteMediaStreamUrl} />
        }
      </div>
      <div className={classNames(styles.localVideo, `local-video`)}>
        {
          localMediaStreamUrl &&
          <Video src={localMediaStreamUrl} />
        }
      </div>
      <div className={classNames(styles.callControls, `call-controls`)}>
        <CallControls
          intl={intl}
          onHangupClick={onHangupClick}
          showHangupButton
        />
      </div>
    </div>
  );
}

ActiveCall.propTypes = {
  intl: intlShape.isRequired,
  localMediaStreamUrl: PropTypes.string,
  onHangupClick: PropTypes.func.isRequired,
  remoteMediaStreamUrl: PropTypes.string
};
