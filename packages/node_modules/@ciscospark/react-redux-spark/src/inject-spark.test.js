import React from 'react';
import {Provider, connect} from 'react-redux';
import renderer from 'react-test-renderer';
import store from './__mocks__/spark-store';

import injectSpark from './inject-spark';

function MockComponent() {
  return <div>{`MockComponent`}</div>;
}

function mapStateToProps(state, ownProps) {
  return Object.assign({}, state.spark, {
    spark: ownProps.spark
  });
}

const accessToken = process.env.CISCOSPARK_ACCESS_TOKEN;

describe(`injectSpark`, () => {

  it(`renders correctly`, () => {
    const ConnectedComponent = connect(
      mapStateToProps
    )(injectSpark(MockComponent));

    const component = renderer.create(
      <Provider store={store}>
        <ConnectedComponent accessToken={accessToken} />
      </Provider>
    ).toJSON();

    expect(component).toMatchSnapshot();
  });
});
