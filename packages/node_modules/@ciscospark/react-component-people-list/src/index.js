import React from 'react';
import PropTypes from 'prop-types';
import classNames from 'classnames';

import Person from './list-item';

import styles from './styles.css';

export default function PeopleList({
  items,
  onItemClick
}) {
  if (items && items.length) {
    return (
      <div>
        {
          items.map((group) =>
            <div className={classNames(`ciscospark-people-group`, styles.group)} key={group.label || `1`}>
              {
                group.label &&
                <h3 className={classNames(`ciscospark-people-group-title`, styles.title)}>{group.label}</h3>
              }
              {
                group.people && group.people.length &&
                group.people.map((p) => {
                  const handleItemClick = () => {
                    if (typeof onItemClick === `function`) {
                      onItemClick.bind(this, p);
                    }
                  };

                  return (
                    <Person
                      displayName={p.displayName || p.name}
                      key={p.id}
                      onClick={handleItemClick}
                      {...p}
                    />
                  );
                })
              }
            </div>
          )
        }
      </div>
    );
  }
  return null;
}

PeopleList.propTypes = {
  items: PropTypes.arrayOf(PropTypes.shape({
    label: PropTypes.string,
    people: PropTypes.arrayOf(PropTypes.shape({
      avatar: PropTypes.string,
      displayName: PropTypes.string,
      id: PropTypes.string,
      isExternal: PropTypes.bool,
      isPending: PropTypes.bool
    }))
  })),
  onItemClick: PropTypes.func
};
