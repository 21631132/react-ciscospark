import {fromJS} from 'immutable';

import {
  STORE_METRIC,
  ADD_TO_QUEUE,
  CLEAR_QUEUE,
  UPDATE_METRICS_STATUS
} from './actions';

const initialState = fromJS({
  items: {},
  queue: [],
  status: {
    isSendingQueue: false
  }
});

export default function reducer(state = initialState, action) {
  switch (action.type) {
  case STORE_METRIC:
    return state.setIn([`items`, action.payload.name], action.payload.data);
  case ADD_TO_QUEUE:
    return state.setIn([`queue`, action.payload.name], action.payload.data);
  case CLEAR_QUEUE:
    return state.set(`queue`, fromJS([]));
  case UPDATE_METRICS_STATUS:
    return state.mergeDeepIn([`status`], action.payload.status);
  default:
    return state;
  }
}
